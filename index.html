<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>자재현황 실시간 관리</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database.js"></script>
  <style>
    body {
      font-family: 'Pretendard', sans-serif;
      background-color: #f0f4f8;
      margin: 0;
      padding: 0;
      color: #2c3e50;
    }

    .container {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .material-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background-color: #fafafa;
    }

    .material-item span {
      font-size: 16px;
    }

    .editable {
      border: 1px solid #ccc;
      padding: 5px;
      border-radius: 4px;
      min-width: 50px;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>자재현황 실시간 관리</h1>
    <div id="material-list"></div>
  </div>

  <script>
     // Firebase 설정
 const firebaseConfig = {
  apiKey: "AIzaSyBFnvY4Adn35uSb0RztjBKkPkRnhuOCYn4",
  authDomain: "korail-dac64.firebaseapp.com",
  databaseURL: "https://korail-dac64-default-rtdb.firebaseio.com",
  projectId: "korail-dac64",
  storageBucket: "korail-dac64.firebasestorage.app",
  messagingSenderId: "366259094919",
  appId: "1:366259094919:web:ab1c74c4f38a799113bf22",
  measurementId: "G-QL8W3JEP0B"
};


    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // Firebase에서 자재 데이터 가져오기
    const materialsRef = database.ref('materials');

    materialsRef.on('value', (snapshot) => {
      const materials = snapshot.val();
      displayMaterials(materials);
    });

    function displayMaterials(materials) {
      const materialListDiv = document.getElementById('material-list');
      materialListDiv.innerHTML = ''; // 기존 자재 목록 지우기

      if (materials) {
        for (let materialId in materials) {
          const material = materials[materialId];
          const div = document.createElement('div');
          div.classList.add('material-item');
          div.innerHTML = `
            <span>${material.name}</span>
            <span>수량: <span contenteditable="true" data-id="${materialId}" class="editable">${material.quantity}</span></span>
          `;
          materialListDiv.appendChild(div);
        }

        // 수량 변경 시 실시간 업데이트
        const editableElements = document.querySelectorAll('.editable');
        editableElements.forEach((element) => {
          element.addEventListener('blur', (event) => {
            const newQuantity = parseInt(event.target.innerText);
            const materialId = event.target.getAttribute('data-id');
            updateMaterialQuantity(materialId, newQuantity);
          });
        });
      }
    }

    function updateMaterialQuantity(materialId, quantity) {
      if (isNaN(quantity)) return; // 수량이 숫자가 아니면 업데이트하지 않음
      const materialRef = materialsRef.child(materialId);
      materialRef.update({
        quantity: quantity
      });
    }
  </script>

</body>
</html>

 
