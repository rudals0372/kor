 <!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>자재현황</title>
  <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
    }
    #material-list {
      margin-top: 20px;
    }
    .material-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      padding: 10px;
      background: #f4f4f4;
      border-radius: 5px;
    }
    .material-item button {
      padding: 5px 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h1>자재현황</h1>
  <div id="material-list">
    <!-- 자재 목록이 여기에 표시됩니다 -->
  </div>

  <script>

     // Firebase 설정
 const firebaseConfig = {
  apiKey: "AIzaSyBFnvY4Adn35uSb0RztjBKkPkRnhuOCYn4",
  authDomain: "korail-dac64.firebaseapp.com",
  databaseURL: "https://korail-dac64-default-rtdb.firebaseio.com",
  projectId: "korail-dac64",
  storageBucket: "korail-dac64.firebasestorage.app",
  messagingSenderId: "366259094919",
  appId: "1:366259094919:web:ab1c74c4f38a799113bf22",
};

    // Firebase 초기화
    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database(app);

    // 자재 데이터를 가져올 경로
    const materialRef = database.ref("materials");

    // 자재 목록을 화면에 렌더링하는 함수
    function renderMaterialList(materials) {
      const materialListElement = document.getElementById("material-list");
      materialListElement.innerHTML = "";  // 기존 목록 지우기

      // Firebase에서 가져온 자재 데이터를 화면에 표시
      materials.forEach((material) => {
        const itemDiv = document.createElement("div");
        itemDiv.classList.add("material-item");

        // 자재 이름과 수량
        const materialInfo = document.createElement("span");
        materialInfo.textContent = `${material.name} - 수량: ${material.quantity}`;

        // 수량 수정 버튼
        const editButton = document.createElement("button");
        editButton.textContent = "수정";
        editButton.onclick = () => updateMaterialQuantity(material.key);

        itemDiv.appendChild(materialInfo);
        itemDiv.appendChild(editButton);

        materialListElement.appendChild(itemDiv);
      });
    }

    // 자재 수량 수정 함수
    function updateMaterialQuantity(key) {
      const newQuantity = prompt("새로운 수량을 입력하세요:");
      if (newQuantity !== null) {
        const quantity = parseInt(newQuantity);
        if (!isNaN(quantity)) {
          const materialRefToUpdate = materialRef.child(key);
          materialRefToUpdate.update({
            quantity: quantity
          });
        } else {
          alert("수량은 숫자만 입력할 수 있습니다.");
        }
      }
    }

    // Firebase에서 자재 목록을 실시간으로 가져오기
    materialRef.on("value", (snapshot) => {
      const data = snapshot.val();
      if (data) {
        const materials = Object.keys(data).map(key => ({
          key,
          ...data[key]
        }));
        renderMaterialList(materials);
      }
    });
  </script>

</body>
</html>

